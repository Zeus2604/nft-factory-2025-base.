<!DOCTYPE html>
<html>
<head>
  <title>NFT Factory by Almar55</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>Generate up to 500 NFTs for free</h1>
  <p>This site is for owners of the NFT Halloween_Almar_PFP</p>
  <button onclick="generate()">Generate NFTs</button>
</body>

<script>
function generate(){
    let count = 500;
    let layers = [];

    async function create(){
        for(let i = 0; i < count; i++){
            layers.push(`background/${['1.jpg','2.jpg','3.jpg'][Math.floor(Math.random() * 3)]}`);
            layers.push(`fuego/${['1.jpg','2.jpg','3.jpg'][Math.floor(Math.random() * 3)]}`);
            layers.push(`texto/${['1.jpg','2.jpg','3.jpg'][Math.floor(Math.random() * 3)]}`);

            const image = document.createElement('canvas');
            image.width = 1024;
            image.height = 1024;
            const ctx = image.getContext('2d');

            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, 1024, 1024);

            for(let l of layers){
                let img = new Image();
                img.src = l;
                await new Promise(r => img.onload = r);
                ctx.drawImage(img, 0, 0, 1024, 1024);
            }

            let link = document.createElement('a');
            link.href = image.toDataURL();
            link.download = `nft-${i+1}.png`;
            link.click();

            layers = [];
        }
    }
    create();
}
</script>
</html>
